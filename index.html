<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cocktail Vision</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #f8bbd0, #f48fb1);
            color: #333;
            margin: 0;
            padding: 15px;
            min-height: 100vh;
            transition: background 1s;
            line-height: 1.2;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
        }
        
        header {
            margin-bottom: 15px;
        }
        
        .school-header {
            font-size: 1rem;
            margin-bottom: 5px;
            color: #880e4f;
        }
        
        .authors {
            font-size: 0.9rem;
            margin-bottom: 10px;
            color: #880e4f;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            color: #c2185b;
        }
        
        .subtitle {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #4a148c;
        }
        
        .creator {
            font-style: italic;
            color: #880e4f;
            margin-bottom: 10px;
        }
        
        .rules {
            background-color: rgba(255, 255, 255, 0.6);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: left;
        }
        
        .rules h2 {
            color: #880e4f;
            text-align: center;
            margin-top: 5px;
        }
        
        .rules ul {
            padding-left: 20px;
            margin: 10px 0;
            color: #333;
        }
        
        .rules li {
            margin-bottom: 8px;
        }
        
        .game-container {
            margin-top: 15px;
        }
        
        .challenge, #homeScreen, #gameOverScreen {
            display: none;
            padding: 20px;
            border: 2px solid #c2185b;
            border-radius: 15px;
            margin: 15px auto;
            background-color: rgba(255, 255, 255, 0.6);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-width: 600px;
        }
        
        #homeScreen {
            display: block;
        }
        
        .cocktail-image {
            width: 440px;
            height: auto;
            border-radius: 10px;
            margin: 10px auto;
            display: block;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        .game-image {
            width: 550px;
            height: auto;
            border-radius: 10px;
            margin: 10px auto;
            display: block;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        .victory-image {
            width: 300px;
            height: auto;
            border-radius: 10px;
            margin: 10px auto;
            display: block;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        .gameover-images {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
        }
        
        .gameover-image {
            width: 240px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        
        #menuBlurred {
            filter: blur(2px);
            font-size: 36px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .start-button {
            padding: 15px 35px;
            margin: 15px;
            background: linear-gradient(to right, #c2185b, #880e4f);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 22px;
            font-weight: bold;
            font-family: 'Montserrat', sans-serif;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            text-transform: uppercase;
        }
        
        .start-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }
        
        .start-button:active {
            transform: translateY(1px);
        }
        
        .button {
            padding: 12px 30px;
            margin: 15px;
            background: linear-gradient(to right, #c2185b, #880e4f);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            font-family: 'Montserrat', sans-serif;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
        }
        
        .button:active {
            transform: translateY(1px);
        }
        
        input[type="text"] {
            padding: 12px;
            border: 2px solid #c2185b;
            border-radius: 50px;
            font-size: 16px;
            width: 250px;
            text-align: center;
            margin: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            outline: none;
        }
        
        input[type="text"]:focus {
            border-color: #880e4f;
            box-shadow: 0 0 8px rgba(194, 24, 91, 0.6);
        }
        
        #level {
            font-size: 24px;
            font-weight: bold;
            color: #880e4f;
            margin-top: 15px;
        }
        
        #result {
            font-size: 24px;
            font-weight: bold;
            margin-top: 15px;
            min-height: 36px;
        }
        
        .win {
            color: #2ecc71;
            animation: pulse 1s infinite;
        }
        
        .lose {
            color: #c2185b;
            animation: shake 0.5s;
        }
        
        #victoryScreen {
            display: none;
            padding: 20px;
            border: 2px solid #c2185b;
            border-radius: 15px;
            margin: 15px auto;
            background-color: rgba(255, 255, 255, 0.6);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            animation: fadeIn 1s;
        }
        
        .level-progress {
            width: 80%;
            height: 30px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            margin: 15px auto;
            overflow: hidden;
            position: relative;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        
        .level-progress-bar {
            height: 100%;
            width: 0;
            background: linear-gradient(to right, #c2185b, #880e4f, #4a148c);
            border-radius: 15px;
            transition: width 0.5s ease;
        }
        
        .level-labels {
            display: flex;
            justify-content: space-between;
            width: 80%;
            margin: 5px auto 15px;
            font-size: 11px;
            color: #4a148c;
        }
        
        .lives-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10px auto;
        }
        
        .lives-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .lives-display {
            display: flex;
            justify-content: center;
            margin-bottom: 5px;
        }
        
        .life {
            width: 80px;
            height: 80px;
            margin: 0 10px;
            background-image: url('https://i.postimg.cc/cJW1WrW3/DALL-E-2025-03-06-17-52-53-A-perfect-tropical-cocktail-in-a-tall-glass-garnished-with-a-blue-cock.png');
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .life.lost {
            opacity: 0.3;
        }
        
        .attempts-text {
            font-size: 18px;
            font-weight: bold;
            color: #880e4f;
            margin-top: 5px;
        }
        
        .credits {
            font-size: 0.7rem;
            color: #4a148c;
            margin-top: 15px;
            line-height: 1.3;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
    </style><link rel="manifest" href="manifest.json">

</head>
<body>
    <div class="container">
        <header>
            <div class="school-header">Istituto Statale Di Istruzione Superiore Fermi Eredia</div>
            <h1>Cocktail Vision</h1>
            <p class="subtitle">Completa le prove con problemi visivi simulati!</p>
            <p class="authors">Gioco creato da Sanjana Issen e Gabriele Tornabene</p>
        </header>
        
        <!-- Schermata iniziale -->
        <div id="homeScreen">
            <h2>Benvenuto a Cocktail Vision!</h2>
            <img src="https://i.postimg.cc/262Fg72W/Sanjana-Bar-Girl.jpg" alt="Cocktail Perfetto" class="cocktail-image">
            
            <div class="rules">
                <h2>Regole del Gioco</h2>
                <ul>
                    <li>Devi leggere correttamente il nome del cocktail nonostante la visione offuscata</li>
                    <li>Ogni livello aumenta la difficoltà con maggiore ubriacatura</li>
                    <li>Hai 3 tentativi prima di perdere</li>
                    <li>Completare il livello 10 per vincere il gioco!</li>
                </ul>
            </div>
            
            <button class="start-button" onclick="startGame()">Inizia il PARTY</button>
            <p class="credits">PNRR – LA SCUOLA FUTURA<br>STEM e Multilinguismo a scuola: learning by doing<br>Laboratorio co-curricolare "Pensiero Computazionale per Creare e Apprendere"<br>Tutor: <strong>Prof.ssa Russo Simona</strong><br>Docente Esperto Formatore: <strong>Ing. Azzarelli Giampiero</strong></p>
        </div>
        
        <!-- Schermata del gioco -->
        <div class="game-container">
            <div id="gameScreen" class="challenge">
                <img id="levelImage" src="https://i.postimg.cc/262Fg72W/Sanjana-Bar-Girl.jpg" alt="Cocktail Bar" class="game-image">
                
                <h2>Livello <span id="currentLevel">1</span></h2>
                
                <div class="level-progress">
                    <div class="level-progress-bar" id="progressBar"></div>
                </div>
                <div class="level-labels">
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
                    <span>4</span>
                    <span>5</span>
                    <span>6</span>
                    <span>7</span>
                    <span>8</span>
                    <span>9</span>
                    <span>10</span>
                </div>
                
                <div id="menuBlurred"><span id="cocktailName">Spritz</span></div>
                <input type="text" id="menuInput" placeholder="Scrivi il cocktail">
                <button class="button" onclick="checkAnswer()">Conferma</button>
                
                <div class="lives-wrapper">
                    <div class="lives-display">
                        <div class="life" id="life1"></div>
                        <div class="life" id="life2"></div>
                        <div class="life" id="life3"></div>
                    </div>
                    <div class="attempts-text" id="attemptsText">Hai ancora 3 tentativi</div>
                </div>
            </div>
            
            <div id="gameOverScreen">
                <h2>GAME OVER!</h2>
                <p>Sei troppo ubriaco! È ora di tornare a casa con un Taxi!</p>
                <div class="gameover-images">
                    <img src="https://i.postimg.cc/P5Q4mHYK/Sanjana-Bar-Girl-Livello10.jpg" alt="Game Over" class="gameover-image">
                    <img src="https://i.postimg.cc/P5Q4mHYK/Sanjana-Bar-Girl-Livello10.jpg" alt="Game Over" class="gameover-image">
                </div>
                <button class="start-button" onclick="resetGame()">Ricomincia il PARTY</button>
            </div>
            
            <div id="victoryScreen">
                <h2>Congratulazioni! Hai completato il gioco!</h2>
                <p>Hai superato tutti i 10 livelli e dimostrato di essere un esperto di cocktail!</p>
                <img src="https://i.postimg.cc/P5Q4mHYK/Sanjana-Bar-Girl-Livello10.jpg" alt="Victory Celebration" class="victory-image">
                <p>La barista ti offre un drink per celebrare la tua vittoria!</p>
                <button class="start-button" onclick="resetGame()">Ricomincia il PARTY</button>
            </div>
        </div>
        
        <p id="result"></p>
    </div>
    
    <script>
        let currentLevel = 1;
        let attempts = 3;
        let currentCocktail = "";
        const maxLevel = 10;
        let currentBlurLevel = 2; // Valore iniziale della sfocatura
        
        // Lista di cocktail classici e inventati
        const cocktails = [
            "Spritz", 
            "Mojito", 
            "Negroni", 
            "Margarita", 
            "Manhattan", 
            "Daiquiri", 
            "Cosmopolitan", 
            "Sanjana Sunrise", 
            "Sanjana Breeze", 
            "Sanjana Blue Lagoon", 
            "Sanjana Passion", 
            "Sanjana Tropical Twist", 
            "Sanjana Paradise", 
            "Sanjana Fizz", 
            "Sanjana Delight", 
            "Sanjana Dream",
            "Gabriele Mule",
            "Gabriele Fizz",
            "Gabriele Sour",
            "Giampiero Martini",
            "Giampiero Punch",
            "Giampiero Royale",
            "Simona Colada",
            "Simona Sling",
            "Simona Spritzer"
        ];
        
        function getRandomCocktail() {
            const randomIndex = Math.floor(Math.random() * cocktails.length);
            return cocktails[randomIndex];
        }
        
        function updateLevelImage() {
            const levelImage = document.getElementById("levelImage");
            
            if (currentLevel >= 10) {
                levelImage.src = "https://i.postimg.cc/P5Q4mHYK/Sanjana-Bar-Girl-Livello10.jpg";
            } else if (currentLevel >= 8) {
                levelImage.src = "https://i.postimg.cc/dQg4F4JR/Sanjana-Bar-Girl-Livello8.jpg";
            } else if (currentLevel >= 6) {
                levelImage.src = "https://i.postimg.cc/qvTwhqhz/Sanjana-Bar-Girl-Livello6.jpg";
            } else if (currentLevel >= 4) {
                levelImage.src = "https://i.postimg.cc/nc7ThBLy/Sanjana-Bar-Girl-Livello4.jpg";
            } else if (currentLevel >= 2) {
                levelImage.src = "https://i.postimg.cc/T2KCBZvY/Sanjana-Bar-Girl-Livello2.jpg";
            } else {
                levelImage.src = "https://i.postimg.cc/262Fg72W/Sanjana-Bar-Girl.jpg";
            }
        }
        
        function updateLives() {
            for (let i = 1; i <= 3; i++) {
                const lifeElement = document.getElementById("life" + i);
                if (i <= attempts) {
                    lifeElement.classList.remove("lost");
                } else {
                    lifeElement.classList.add("lost");
                }
            }
            
            // Aggiorna il testo dei tentativi rimanenti
            document.getElementById("attemptsText").textContent = `Hai ancora ${attempts} ${attempts === 1 ? 'tentativo' : 'tentativi'}`;
        }
        
        function startGame() {
            // Nascondi la schermata iniziale e mostra il gioco
            document.getElementById("homeScreen").style.display = "none";
            document.getElementById("gameScreen").style.display = "block";
            document.getElementById("gameOverScreen").style.display = "none";
            document.getElementById("victoryScreen").style.display = "none";
            
            resetGame();
        }
        
        function resetGame() {
            currentLevel = 1;
            attempts = 3;
            currentBlurLevel = 2; // Resetta la sfocatura iniziale
            
            // Nascondi lo schermo di vittoria e mostra la sfida
            document.getElementById("victoryScreen").style.display = "none";
            document.getElementById("gameOverScreen").style.display = "none";
            document.getElementById("gameScreen").style.display = "block";
            
            updateLevel();
            updateProgressBar();
            updateLives();
            updateLevelImage();
            
            document.getElementById("result").innerText = "";
            document.getElementById("result").className = "";
            document.getElementById("menuInput").value = "";
        }
        
        function updateLevel() {
            // Seleziona un cocktail casuale
            currentCocktail = getRandomCocktail();
            document.getElementById("cocktailName").textContent = currentCocktail;
            
            // Aggiorna l'indicatore del livello
            document.getElementById("currentLevel").textContent = currentLevel;
            
            // Applica la sfocatura attuale
            document.getElementById("menuBlurred").style.filter = `blur(${currentBlurLevel}px)`;
        }
        
        function updateProgressBar() {
            // Aggiorna la barra di progresso
            const progressPercentage = ((currentLevel - 1) / maxLevel) * 100;
            document.getElementById("progressBar").style.width = progressPercentage + "%";
        }
        
        function checkAnswer() {
            let answer = document.getElementById("menuInput").value.toLowerCase();
            
            if (answer === currentCocktail.toLowerCase()) {
                // Risposta corretta
                document.getElementById("result").innerText = "HAI INDOVINATO! PUOI ORDINARE ANCORA";
                document.getElementById("result").className = "win";
                document.body.style.background = "linear-gradient(135deg, #27ae60, #2ecc71)";
                
                if (currentLevel === maxLevel) {
                    // Il giocatore ha raggiunto il livello massimo
                    setTimeout(() => {
                        document.getElementById("gameScreen").style.display = "none";
                        document.getElementById("victoryScreen").style.display = "block";
                        document.body.style.background = "linear-gradient(135deg, #8e44ad, #9b59b6)";
                    }, 1500);
                } else {
                    // Passa al livello successivo
                    currentLevel++;
                    
                    // Aumenta leggermente la sfocatura ad ogni livello
                    currentBlurLevel += 0.5;
                    
                    setTimeout(() => {
                        updateLevel();
                        updateProgressBar();
                        updateLevelImage();
                        document.getElementById("result").innerText = "Livello " + currentLevel;
                        document.getElementById("result").className = "";
                        document.getElementById("menuInput").value = "";
                        document.body.style.background = "linear-gradient(135deg, #f8bbd0, #f48fb1)";
                    }, 1500);
                }
                
            } else {
                // Risposta sbagliata
                attempts--;
                updateLives();
                
                if (attempts <= 0) {
                    // Game over
                    document.getElementById("result").innerText = "Game Over!";
                    document.getElementById("result").className = "lose";
                    document.body.style.background = "linear-gradient(135deg, #c0392b, #e74c3c)";
                    
                    setTimeout(() => {
                        document.getElementById("gameScreen").style.display = "none";
                        document.getElementById("gameOverScreen").style.display = "block";
                    }, 1500);
                } else {
                    document.getElementById("result").innerText = "HAI SBAGLIATO! STAI ATTENTO";
                    document.getElementById("result").className = "lose";
                }
            }
        }
        
        // Event listener per premere Enter
        document.getElementById("menuInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                checkAnswer();
            }
        });
    </script>
<script>
    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("sw.js")
            .then((registration) => {
                console.log("Service Worker registrato con successo:", registration);
            })
            .catch((error) => {
                console.log("Errore nella registrazione del Service Worker:", error);
            });
    }
</script>
</body>
</html>
